

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>درس ۰۳: ایجاد و اجرای پروژه &mdash; آموزش فارسی پایتون 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  

    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="top" title="آموزش فارسی پایتون 1.0 documentation" href="../index.html"/>
        <link rel="prev" title="درس ۰۲: نصب و راه‌اندازی" href="l02.html"/> 

  
  <script src="static/js/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> آموزش فارسی پایتون</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="جستجو..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="l01.html">درس ۰۱: آشنایی</a><ul>
<li class="toctree-l2"><a class="reference internal" href="l01.html#id3">تاریخچه</a></li>
<li class="toctree-l2"><a class="reference internal" href="l01.html#id6">توصیفی کوتاه</a></li>
<li class="toctree-l2"><a class="reference internal" href="l01.html#id8">ویژگی‌ها</a></li>
<li class="toctree-l2"><a class="reference internal" href="l01.html#id12">کارایی</a></li>
<li class="toctree-l2"><a class="reference internal" href="l01.html#id16">نسخه‌ها</a></li>
<li class="toctree-l2"><a class="reference internal" href="l01.html#id18">پی‌نوشت</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="l02.html">درس ۰۲: نصب و راه‌اندازی</a><ul>
<li class="toctree-l2"><a class="reference internal" href="l02.html#id3">دانلود</a></li>
<li class="toctree-l2"><a class="reference internal" href="l02.html#id7">نصب در ویندوز</a></li>
<li class="toctree-l2"><a class="reference internal" href="l02.html#id8">نصب در گنولینوکس</a></li>
<li class="toctree-l2"><a class="reference internal" href="l02.html#id9">سیستم مدیریت بسته</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">درس ۰۳: ایجاد و اجرای پروژه</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id3">ساختار پروژه</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">ایجاد سورس کد</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">اجرای سورس کد</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">پشت صحنه اجرا</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">آموزش فارسی پایتون</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">برگه‌ها</a> &raquo;</li>
      
    <li>درس ۰۳: ایجاد و اجرای پروژه</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/lessons/l03.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="id1">
<h1>درس ۰۳: ایجاد و اجرای پروژه<a class="headerlink" href="#id1" title="لینک ثابت به این سر مقاله">¶</a></h1>
<p>این درس به چگونگی ایجاد پروژه‌‌های برنامه‌نویسی پایتون و اجرای آن‌ها اختصاص یافته است. درس با بیان تعاریف و رسم ساختار معمول یک  پروژه شروع  و اشاره‌ای نیز به ساختار پروژه‌های قابل انتشار در PyPI می‌شود. در بخش یکم تلاش شده است که تصویر کاملی از ساختار یک پروژه در ذهن خواننده ایجاد و از این طریق او با تعاریف «بسته»، «ماژول» و «اسکریپت» در زبان پایتون آشنا شود. در دو بخش‌ بعد نیز ضمن اشاره به دو شیوه‌ اجرای دستورات پایتون، به شیوه ایجاد اسکریپت و چگونگی اجرای آن تمرکز شده است؛ چرا که پروژه‌های پایتون به این شیوه اجرا می‌گردند. در بخش پایانی هم به روند اجرای کد توسط مفسر پایتون و همچنین معرفی بایت‌کد توجه شده است.</p>
<p><span class="emoji-size">✔</span> سطح: پایه</p>
<p><span class="emoji-size">✔</span> <a class="reference external" href="http://coderz.ir/python-tutorial-create-project/">زادگاه این نوشته - بیان دیدگاه‌‌ و سوال</a></p>
<hr class="docutils" />
<div class="section" id="id3">
<h2>ساختار پروژه<a class="headerlink" href="#id3" title="لینک ثابت به این سر مقاله">¶</a></h2>
<p>نخستین گام در توسعه‌ یک برنامه پایتون ایجاد یک پروژه است و ایجاد هر پروژه نیز با ایجاد سورس کد آن شروع می‌شود.</p>
<p>سورس کد یک پروژه برنامه‌نویسی به زبان پایتون را می‌توان به صورت یک یا چند «ماژول» (Module) در نظر گرفت. در سورس کدهایی با بیش از یک ماژول بهتر است ماژول‌هایی که از نظر منطقی با یکدیگر مرتبط هستند را درون دایرکتوری‌هایی مجزا قرار دهیم که به این نوع دایرکتوری‌ها در زبان پایتون «بسته» (Package) گفته می‌شود.</p>
<div class="admonition tip">
<p class="first admonition-title">نکته</p>
<p class="last">یک یا چند ماژول درون یک دایرکتوری مشخص تشکیل یک بسته را می‌دهند و هر بسته خود می‌تواند حاوی بسته‌(های) دیگری باشد.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p class="last">از نسخه 3.3 پایتون با افزوده شدن ویژگی جدیدی به نام «بسته فضانام» (Namespace Package - <a class="reference external" href="http://www.python.org/dev/peps/pep-0420">PEP 420</a>)، تعریف بسته پایتون به دو شاخه «بسته عادی» (Regular Package) که همان تعریف قدیمی از بسته می‌باشد و بسته فضانام گسترش یافته است. [در درس مربوط به ماژول‌ها بیشتر توضیح داده خواهد شد]</p>
</div>
<p>در تعریف زبان پایتون دو نوع ماژول وجود دارد:</p>
<p>۱- Pure Module (ماژول ناب)، همان تعریف عادی از ماژول پایتون است؛ فایل‌هایی با پسوند py که کد (تعاریف و دستورات) پایتون در آن‌ها نوشته می‌شوند.</p>
<p>۲- Extension Module (ماژول توسعه)، ماژول‌هایی که توسط زبان‌های برنامه نویسی دیگری  به غیر از پایتون  ایجاد شده‌اند. از درس یکم به خاطر داریم که پایتون یک زبان توسعه‌پذیر است و در کنار آن می‌توان از کد‌های نوشته شده با دیگر زبان‌های برنامه‌نویسی استفاده نمود: به مانند C و ++C در پیاده‌سازی CPython یا Java در پیاده‌سازی Jython یا #C در پیاده‌سازی IronPython - [ایجاد و استفاده از این نوع ماژول در درسی جداگانه بررسی خواهد شد.]</p>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p class="last">از این پس هر جایی از آموزش که گفته شود «ماژول» منظور Pure Module خواهد بود، مگر اینکه نام «ماژول توسعه» به صراحت ذکر گردد.</p>
</div>
<p>در ایجاد یک پروژه از پایتون هیچ اجباری به رعایت ساختار خاصی نیست و حتی سورس کد یک پروژه می‌تواند تنها شامل یک ماژول باشد. به عنوان نمونه، شمای پایین از پروژه فرضی SampleProject را در نظر بگیرید:</p>
<div class="code highlight-python"><div class="highlight"><pre>SampleProject
.
├── sample_project.py
├── module_one.py
└── pakage
    ├── __init__.py
    ├── module_two.py
    └── module_three.py
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">نکته</p>
<p class="last">در پایتون هر بسته‌ (عادی) می‌بایست حاوی فایل ویژه‌‌‌ init__.py__ باشد که البته الزامی به کدنویسی درون این فایل وجود ندارد. این فایل دایرکتوری خود را به عنوان یک بسته (محلی برای یافتن ماژول‌ها) به مفسر پایتون معرفی می‌کند.</p>
</div>
<p>در ایجاد سورس کد باید به صورتی عمل شود که با اجرای یک ماژول‌ مشخص تمام برنامه اجرا گردد. این ماژول معمولا هم نام پروژه در نظر گرفته و با عنوان «اسکریپت» (Script) از آن یاد می‌شود (اینجا:‌ sample_project.py). در واقع اسکریپت، ماژولی است که با هدف اجرا توسعه می‌یابد و ایجاد سورس کد نیز از آن شروع می‌گردد. از طرفی همانطور که می‌دانیم یکی از ویژگی‌های پایتون امکان برنامه نویسی ماژولار (<a class="reference external" href="http://en.wikipedia.org/wiki/Modular_programming">Modular</a>) است به این صورت که می‌توان کد‌های خود را بر حسب نیاز در ماژول‌هایی جداگانه نوشت و با وارد کردن (Import) آن‌ها در اسکریپت (یا ماژول‌های دیگر) از کدهای آن‌ها استفاده نمود. با این منطق می‌شود سورس کد یک پروژه از پایتون را تنها شامل یک اسکریپت تصور کرد که می‌تواند توسط تعدادی ماژول گسترش یابد؛ البته ممکن است ماژول‌ها نیز بر حسب نیاز در بسته‌هایی جداگانه قرار گرفته باشند.</p>
<div class="admonition tip">
<p class="first admonition-title">نکته</p>
<p class="last">[<a class="reference external" href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a>]: در نام‌گذاری ماژول‌ها تنها از حروف کوچک استفاده می‌شود و در صورت نیاز می‌توان از کاراکتر خط زیرین (_) نیز استفاده نمود. نام بسته‌ها کوتاه بوده و از حروف کوچک تشکیل می‌گردد؛ استفاده از خط زیرین در نام بسته پیشنهاد نمی‌شود.</p>
</div>
<p>اکنون اطلاعات کافی برای شرع یک پروژه از پایتون را دارید ولی چنانچه می‌خواهید پروژه خود را برای استفاده افراد دیگر از طریق PyPI یا سرویس‌هایی نظیر github.com منتشر نمایید (مانند یک کتابخانه)، جدا از سورس کد لازم است موارد دیگری را نیز در ساختار آن در نظر بگیرید. به ساختار پایین توجه نمایید:</p>
<div class="code highlight-python"><div class="highlight"><pre>SampleProject
.
├── docs
├── LICENSE.txt
├── MANIFEST.in
├── README.rst
├── requirements.txt
├── sampleproject
│   ├── __init__.py
│   ├── module_one.py
│   ├── pakage
│   │   ├── __init__.py
│   │   ├── module_two.py
│   │   └── module_three.py
│   ├── sample_project.py
│   └── test
├── setup.cfg
└── setup.py
</pre></div>
</div>
<p>ساختار پیش تنها شامل سورس کد می‌بود ولی در این ساختار تمام سورس کد در قالب یک بسته پایتون بخشی از مجموعه بزرگتری است که در آن یک سری فایل به مانند requirements.txt ،README.rst و setup.py به همراه دو دایرکتوری docs و test افزوده شده است. در ادامه کمی از کاربرد این موارد توضیح داده می‌شود ولی در حال حاضر نیازی به رعایت این ساختار نیست و در انتهای آموزش پایتون با ایجاد یک پروژه عملی و قرار دادن آن بر روی github.com به صورت کاربردی با آن‌ها آشنا خواهید شد. [برای کسب اطلاعات بیشتر می‌توانید از <a class="reference external" href="http://packaging.python.org/en/latest/distributing.html">اسناد پایتون</a> استفاده نمایید]</p>
<p>setup.py: این فایل مهم دو کارکرد دارد:
۱- پیکربندی پروژه که از طریق آرگومان‌های تابع از پیش تعریف شده <code class="docutils literal"><span class="pre">()setup</span></code> درون این فایل صورت می‌پذیرد.
۲- یک رابط خط فرمان برای اجرای دستورات کاربردی مرتبط با پروژه می‌باشد (الگویی مشابه: <code class="docutils literal"><span class="pre">&lt;python</span> <span class="pre">setup.py</span> <span class="pre">&lt;commands</span></code>). فهرست این دستورات از طریق وارد کردن دستوری مشابه <code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">--help-commands</span></code> قابل مشاهده است.</p>
<p>setup.cfg: ساختاری شبیه به یک <a class="reference external" href="http://en.wikipedia.org/wiki/INI_file">فایل ini</a> داشته و در صورت نیاز گزینه‌های مربوط به دستورات خط فرمان setup.py در این فایل تعریف می‌گردند. برای مشاهده فهرست گزینه‌های یک دستور مشخص  می‌توانید از الگوی <code class="docutils literal"><span class="pre">&lt;python</span> <span class="pre">setup.py</span> <span class="pre">--help</span> <span class="pre">&lt;commands</span></code> پیروی نمایید.</p>
<p>README.rst: تمام پروژه‌ها می‌بایست شامل سندی برای توصیف خود باشند. در پایتون برای ایجاد اسناد معمولا از زبان نشانه‌گذاری <a class="reference external" href="http://en.wikipedia.org/wiki/ReStructuredText">reStructuredText</a> استفاده می‌گردد و به همین دلیل این اسناد پسوند rst دارند که البته اجباری به این مورد نیست و می‌توانید برای ایجاد این فایل از <a class="reference external" href="http://en.wikipedia.org/wiki/Markdown">Markdown</a> (پسوند md) نیز استفاده نمایید.</p>
<p>MANIFEST.in: معمولا از این فایل برای معرفی فایل‌های غیر پایتونی موجود در پروژه استفاده می‌شود. زمانی که قصد ایجاد «سورس توزیع» یا sdist از پروژه را داشته باشید (دستوری مشابه: <code class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">sdist</span></code>)  تنها <a class="reference external" href="http://docs.python.org/3.4/distutils/sourcedist.html#specifying-the-files-to-distribute">فایل‌های مشخصی</a> از پروژه شناسایی می‌شوند و شناساندن باقی فایل‌ها (در صورت وجود) می‌بایست توسط این فایل (البته با <a class="reference external" href="http://docs.python.org/2/distutils/sourcedist.html#the-manifest-in-template">الگویی خاص</a>) انجام گیرد.</p>
<p>requirements.txt: از این فایل برای معرفی کتابخانه‌های خاصی که در پروژه استفاده شده‌اند و در زمان نصب یا اجرای سورس کد ضروری هستند استفاده می‌گردد.</p>
<p>LICENSE.txt: این فایل پروانه‌ انتشار پروژه را شامل می‌شود و اغلب حاوی یک کپی از متن پروانه‌های متن باز رایج به مانند <a class="reference external" href="http://opensource.org/licenses/MIT">MIT</a> ،<a class="reference external" href="http://opensource.org/licenses/GPL-3.0">GPL</a> یا <a class="reference external" href="http://opensource.org/licenses/BSD-3-Clause">BSD</a> می‌باشد.</p>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p class="last">لازم است تمامی فایل‌های یاد شده و دایرکتوری docs در بالاترین شاخه از دایرکتوری پروژه قرار داده شوند.</p>
</div>
<p>docs: در این دایرکتوری اسناد (راهنما، آموزش و...)  پروژه قرار داده می‌شوند. ایجاد این اسناد توسط <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a> در درسی جداگانه بررسی خواهد شد.</p>
<p>test: این دایرکتوری محل نگهداری برنامه تست پروژه می‌باشد. ایجاد تست پروژه نیز در درسی جداگانه بررسی می‌گردد. این دایرکتوری می‌تواند هم  در بالا ترین شاخه از پروژه و هم در داخل دایرکتوری سورس کد قرار داده شود.</p>
<p>با ایجاد یک توزیع (Distribution) از این ساختار و انتشار آن [که در آینده خواهید آموخت]، امکان نصب پروژه از طریق pip به وجود می‌آید. معمولا به جای واژه «توزیع» از واژه «بسته» (Package) استفاده می‌شود؛ همانطور که pip نیز «سیستم مدیریت بسته پایتون» نامیده شده است و نباید آن را با مفهوم «بسته» که تا پیش از این مطرح شده است اشتباه گرفت.</p>
</div>
<div class="section" id="id7">
<h2>ایجاد سورس کد<a class="headerlink" href="#id7" title="لینک ثابت به این سر مقاله">¶</a></h2>
<p>برای ایجاد فایل‌های سورس کد (ماژول‌ها یا اسکریپت) نیاز به هیچ برنامه یا ابزار خاصی نیست و تنها با استفاده از یک ویرایشگر ساده متن (مانند برنامه Notepad در ویندوز) می‌توانید آن‌ها را ایجاد و ویرایش نمایید.</p>
<p>در ادامه پروژه‌ای به نام FirstProject که سورس کد آن تنها شامل یک اسکریپت است را ایجاد می‌نماییم. وظیفه این اسکریپت فرستادن حاصل عبارت <code class="docutils literal"><span class="pre">4÷(6×5-50)</span></code> به خروجی  (Output) خواهد بود.</p>
<p>برنامه‌ ویرایشگر متن پیش‌فرض سیستم عامل را اجرا نموده و به کمک آن یکی از کدهای پایین را (متناسب با نسخه پایتون مورد نظر خود) در فایلی با نام مشابه first_project و پسوند py نوشته و بر روی دیسک (در مسیر دایرکتوری Documents سیستم عامل) ذخیره می‌نماییم.</p>
<p>برای نسخه 2x، ساختار FirstProject و محتوای فایل first_project_2x.py را به صورت پایین در نظر می‌گیریم:</p>
<div class="code highlight-python"><div class="highlight"><pre>FirstProject
.
└── first_project_2x.py
</pre></div>
</div>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#-*- coding: utf-8 -*-</span>

<span class="c"># Python 2.x</span>
<span class="c"># File Name: first_project_2x.py</span>
<span class="c"># This script prints a value to the screen.</span>

<span class="k">print</span> <span class="s">&quot;(50-5×6)÷4 =&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="o">-</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span>
</pre></div>
</td></tr></table></div>
<p>و برای نسخه 3x، ساختار FirstProject و محتوای فایل first_project_3x.py را به صورت پایین در نظر می‌گیریم:</p>
<div class="code highlight-python"><div class="highlight"><pre>FirstProject
.
└── first_project_3x.py
</pre></div>
</div>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="c"># Python 3.x</span>
<span class="c"># File Name: first_project_3x.py</span>
<span class="c"># This script prints a value to the screen.</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;(50-5×6)÷4 =&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="o">-</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>در بخش بعدی به اجرای سورس کد FirstProject پرداخته می‌شود؛ در این بخش بهتر است کمی به بررسی کدهای آن بپردازیم:</p>
<p>متن ماژول‌های پایتون 2x به صورت پیش‌فرض استاندارد یونیکد (<a class="reference external" href="http://en.wikipedia.org/wiki/Unicode">Unicode</a>) را پشتیبانی نمی‌کنند و توسط اسکی (<a class="reference external" href="http://en.wikipedia.org/wiki/ASCII">ASCII</a>) کدگذاری (Encoding) می‌شوند که تنها امکان استفاده از ۱۲۷ کاراکتر را می‌دهد. می‌توان با افزودن سطری مطابق الگوی <code class="docutils literal"><span class="pre">-*-</span> <span class="pre">coding:</span> <span class="pre">encoding</span> <span class="pre">-*-#</span></code> در ابتدای ماژول‌های پایتون (سطر یکم یا دوم) شیوه کدگذاری را به شکل دلخواه تعیین نمود. [<a class="reference external" href="http://www.python.org/dev/peps/pep-0263">PEP 263</a>]</p>
<p>بر همین اساس کدگذاری اسکریپت first_script_2x.py را به دلیل استفاده از کاراکترهایی خارج از مجموعه ASCII (÷ و ×) به UTF-8 تغییر داده‌ایم. پایتون 3x به صورت پیش‌فرض از استاندارد یونیکد پشتیبانی می‌کند.</p>
<p>در زبان پایتون هر متنی که بعد از کاراکتر ”Number sign“ یا # (در همان سطر) قرار بگیرد توسط مفسر پایتون نادیده گرفته می‌شود و تاثیری در روند ترجمه و اجرای کدها ندارد، به این نوع متن‌ کامنت (Comment) گفته می‌شود و از آن برای ارایه توضیح در مورد بخشی از کد یا مستندسازی (Documentation) ماژول استفاده می‌گردد. کامنت گذاری نقش زیادی در خوانایی ماژول دارد و کمک می‌کند تا سایر افراد نیز بتوانند عملکرد کدهای ماژول (یا اسکریپت) شما را بفهمند.</p>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p class="last">کاراکتر نخست عبارت تعیین کدگذاری نیز # است ولی این سطر کامنت نبوده و درک آن برای مفسر با ارزش می‌باشد.</p>
</div>
<p>سطرهای خالی (Blank Lines) نیز توسط مفسر پایتون نادیده گرفته می‌شوند و تاثیری در روند ترجمه و اجرای کدها ندارند. استفاده درست از سطرهای خالی بر خوانایی کدهای ماژول می‌افزاید.</p>
<p>روش رایج فرستادن داده به خروجی (اینجا:‌ چاپ بر روی صفحه نمایش) در پایتون، استفاده از دستور <code class="docutils literal"><span class="pre">print</span></code> (در نسخه 2x) یا تابع <code class="docutils literal"><span class="pre">()print</span></code> (در نسخه 3x) است. بارزترین تفاوت نسخه 3.0 پایتون با نسخه‌های پیش از خود،‌ تبدیل دستور <code class="docutils literal"><span class="pre">print</span></code> به تابع (Function) می‌باشد. برای تابع، داده درون پرانتز قرار داده می‌شود. [در درسی جداگانه به بررسی توابع در پایتون خواهیم پرداخت]</p>
<p>دستور (یا تابع) print توانایی دریافت هر تعداد داده و از هر نوع را دارد و در صورت دریافت یک عبارت محاسباتی (Arithmetic) یا منطقی (Logical) ابتدا حاصل آن را محاسبه یا ارزیابی کرده و پس از تبدیل به نوع داده string در خروجی قرار می‌دهد. در هنگام فرستادن چندین داده گوناگون به خروجی می‌بایست آن‌ها را توسط کاما (Comma) از یکدیگر جدا نماییم. در اینجا نیز print دو داده برای فرستادن به خروجی دریافت کرده است؛ یک نوع داده string و یک عبارت محاسباتی.</p>
<p>به دنباله‌ای از کاراکترها که بین دو نماد نقل قول (Quotation) یا ” “ محصور شده‌ باشند، string گفته می‌شود.</p>
</div>
<div class="section" id="id8">
<h2>اجرای سورس کد<a class="headerlink" href="#id8" title="لینک ثابت به این سر مقاله">¶</a></h2>
<p>در حالت کلی به دو شیوه می‌توان به زبان پایتون کد نوشت و اجرا نمود: ۱- درون محیط تعاملی (Interactive) پایتون ۲- با ایجاد اسکریپت پایتون.</p>
<p>شیوه تعاملی: در این روش می‌بایست ابتدا دستور فراخوانی مفسر پایتون (حالت عمومی دستور: <code class="docutils literal"><span class="pre">python</span></code>) را در خط فرمان سیستم عامل وارد نمایید؛ توسط این دستور خط فرمان وارد حالت تعاملی پایتون می‌شود و اکنون به سادگی می‌توانید شروع به کد‌نویسی نمایید. در این محیط هر کدی که وارد شود بلافاصله اجرا شده و در صورت لزوم نتیجه آن نیز نمایش داده می‌شود. از آنجا که در این روش امکان ویرایش کدهای وارد شده وجود ندارد، در عمل زیاد کارآمد نبوده و از آن بیشتر در مواردی مانند گرفتن نتیجه‌ قطعه کدهای کوچک، اهداف آموزشی، دریافت راهنمایی یا ماشین حساب! استفاده می‌گردد. چگونگی کار با این محیط در درس بعدی بررسی می‌شود.</p>
<div class="code highlight-python"><div class="highlight"><pre>$ python
Python 2.7.9 (default, Jan 12 2015, 12:41:47)
[GCC 4.9.2 20141101 (Red Hat 4.9.2-1)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;
&gt;&gt;&gt; a = 3
&gt;&gt;&gt; b = 2
&gt;&gt;&gt; a * b
6
&gt;&gt;&gt;
</pre></div>
</div>
<p>شیوه دیگر که در موضوع این بخش است، ایجاد اسکریپت می‌باشد. پیش از این با ایجاد سورس کد و اسکریپت آشنا شده ایم و می‌دانیم که اسکریپت، ماژولی است که برای اجرای سورس کد توسعه یافته و اجرای سورس کد همیشه از اسکریپت شروع می‌شود.</p>
<p>برای اجرای اسکریپت می‌بایست در خط فرمان سیستم عامل دستور فراخوانی مفسر پایتون را به همراه نام کامل اسکریپت (نشانی + نام + پسوند) وارد نمایید.</p>
<p>در پایین می‌توانید نتیجه اجرای اسکریپتی که در بخش پیش ایجاد نمودیم را در گنولینوکس مشاهده نمایید:</p>
<div class="code highlight-python"><div class="highlight"><pre>$ python Documents/FirstProject/first_project_2x.py
(50-5×6)÷4 = 5

$ python3 Documents/FirstProject/first_project_3x.py
(50-5×6)÷4 = 5.0
</pre></div>
</div>
<p>اگر به حاصل عبارت <code class="docutils literal"><span class="pre">4÷(6×5-50)</span></code> در خروجی دو اسکریپت دقت کرده باشید حتما متوجه تفاوت آن شده‌اید. پایتون 2x حاصل تقسیم دو عدد صحیح (Integer) را به صورت یک عدد صحیح محاسبه و از مقدار بعد از ممیز (در صورت وجود) صرف نظر می‌کند ولی پایتون 3x همواره حاصل تقسیم را به صورت یک عدد اعشاری (Floating Point) و با دقتی بیشتر بر می‌گرداند. باز هم در این مورد صحبت خواهیم کرد.</p>
<p>نتیجه اجرای دو اسکریپت یاد شده در هر سیستم عاملی همان است که در بالا مشاهده می‌نمایید. چنانچه کاربر سیستم عامل ویندوز هستید به این نکته توجه داشته باشید که به دلیل وجود کاراکترهای خاصی (÷ و ×) که قرار است توسط print بر روی خط فرمان نمایش داده شوند و همچنین عدم پشتیبانی پیش‌فرض خط فرمان ویندوز از کدگذاری UTF-8، به هنگام اجرای اسکریپت خطایی گزارش می‌شود که ارتباطی با کد پایتون ندارد. در این مواقع پیشنهاد می‌شود از پایتون 3x و برنامه PowerShell استفاده نموده و پیش از اجرای اسکریپت دستور <code class="docutils literal"><span class="pre">chcp</span> <span class="pre">65001</span></code> را وارد نمایید - به صورت پایین:</p>
<div class="code highlight-python"><div class="highlight"><pre>PS &gt; chcp 65001
Active code page: 65001

PS &gt; python Documents\FirstProject\first_script_3x.py
(50-5×6)÷4 = 5.0
</pre></div>
</div>
<p>چگونگی اجرای اسکریپت‌های پایتون چیزی بیش از این نیست، البته می‌توان در هنگام اجرای اسکریپت داده‌هایی را نیز به عنوان آرگومان به آن ارسال نمود که این مورد در درس بعدی بررسی می‌شود.</p>
<p>معمولا در گنولینوکس سطری به مانند پایین به ابتدای اسکریپت‌های پایتون (فقط در سطر یکم) اضافه می‌کنند، در این صورت به هنگام اجرا دیگر نیازی به فراخوانی مفسر پایتون نبوده و تنها می‌بایست پس از تغییر حالت (Mode) اسکریپت مورد نظر به حالت اجرا (توسط دستور <a class="reference external" href="http://en.wikipedia.org/wiki/Chmod#Symbolic_modes">chmod</a>)، آن را به روش معمول در یونیکس اجرا نماییم:</p>
<div class="code highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">env</span></code> یک دستور شل (Shell) یونیکس است که در زمان اجرای اسکریپت مفسر پایتون را می‌یابد و نشانی آن را جایگزین می‌کند. به جای استفاده از <code class="docutils literal"><span class="pre">env</span></code> می‌توان نشانی مفسر پایتون مورد نظر را به صورت صریح مانند <code class="docutils literal"><span class="pre">usr/bin/python3/!#</span></code> نوشت که البته در مواردی که پایتون به صورت جداگانه نصب شده باشد (نشانی مفسر در این حالت: usr/local/bin/python3/)، کارایی ندارد و موجب شکست در اجرا می‌گردد.</p>
<p>اکنون برای نمونه اگر اسکریپت first_script_2x.py را برای اجرا در گنولینوکس کامل‌تر سازیم:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c">#-*- coding: utf-8 -*-</span>

<span class="c"># Python 2.x</span>
<span class="c"># File: first_project_2x.py</span>
<span class="c"># This script prints a value to the screen.</span>

<span class="k">print</span> <span class="s">&quot;(50-5×6)÷4 =&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="o">-</span><span class="mi">5</span><span class="o">*</span><span class="mi">6</span><span class="p">)</span><span class="o">/</span><span class="mi">4</span>
</pre></div>
</td></tr></table></div>
<p>پس از تغییر حالت، به دو صورت پایین می‌توان آن را در توزیع‌های گنولینوکس اجرا نمود:</p>
<div class="code highlight-python"><div class="highlight"><pre>$ chmod +x Documents/FirstProject/first_project_2x.py

$ Documents/FirstProject/first_project_2x.py
(50-5×6)÷4 = 5

$ cd Documents/FirstProject
$ ./first_project_2x.py
(50-5×6)÷4 = 5
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p class="last">نباید نماد !# (<a class="reference external" href="http://en.wikipedia.org/wiki/Shebang_(Unix)">shebang</a>) را با نماد کامنت در پایتون (#) اشتباه گرفت.</p>
</div>
</div>
<div class="section" id="id9">
<h2>پشت صحنه اجرا<a class="headerlink" href="#id9" title="لینک ثابت به این سر مقاله">¶</a></h2>
<p>زمانی که اقدام به اجرای یک اسکریپت می‌نمایید؛ ابتدا، اسکریپت و تمام ماژول‌های وارد شده در آن به بایت کد کامپایل و سپس بایت کد‌های حاصل جهت تفسیر به زبان ماشین و اجرا، به ماشین مجازی فرستاده می‌شوند. آنچه ما از آن به عنوان مفسر پایتون (پیاده‌سازی CPython) یاد می‌کنیم در واقع ترکیبی از یک کامپایلر و یک ماشین مجازی است. تصویر پایین به خوبی روند اجرای کدهای پایتون را نمایش می‌دهد.</p>
<a class="reference external image-reference" href="http://trizpug.org/Members/cbc/wyntkap/compiler.html"><img alt="../_images/l03-interpreter.png" class="align-center" src="../_images/l03-interpreter.png" /></a>
<p>بایت‌کد هر ماژول‌ پایتون در قالب فایلی با پسوند pyc که یاد‌آور py Compiled است، ذخیره می‌گردد. این فایل در یک زیردایرکتوری با نام __pycache__ داخل همان دایرکتوری ماژول ذخیره می‌شود و نام گذاری آن نیز با توجه به نام ماژول و نسخه‌ مفسر پایتون مورد استفاده، انجام می‌گیرد (نمونه: module.cpython-34.pyc). مفسر پایتون از این فایل ذخیره شده جهت افزایش سرعت اجرا در آینده بهره خواهد برد؛ به این صورت که در نوبت‌های بعدی اجرا چنانچه تغییری در کدهای ماژول یا نسخه‌ مفسر پایتون صورت نگرفته باشد، مفسر با بارگذاری فایل بایت‌کد از ترجمه‌ مجدد سورس کد به بایت‌کد صرف نظر می‌کند.</p>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p>مفسر پایتون تنها برای ماژول‌های وارد شده در اسکریپت اقدام به ذخیره کردن فایل بایت‌کد بر روی دیسک می‌کند و برای اسکریپت‌ این عمل صورت نمی‌گیرد.</p>
<p class="last">بایت‌کد سورس کدهایی که تنها شامل یک اسکریپت هستند در حافظه‌ (RAM) نگهداری می‌شود.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p class="last">زمانی که به هر دلیلی (به مانند: عدم وجود فضای کافی) مفسر پایتون قادر به ذخیره‌ فایل بایت‌کد بر روی دیسک ماشین نباشد، مفسر بایت‌کد را داخل حافظه‌ قرار می‌دهد و مشکلی در اجرا به وجود نخواهد آمد. البته بدیهی است که پس از اتمام اجرا یا قطع ناگهانی منبع تغذیه، بایت‌کد حذف می‌گردد.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">توجه</p>
<p class="last">در نسخه‌های پیش از 3.2، دایرکتوری __pycache__ ایجاد نمی‌گردد و فایل بایت‌کد با نامی برابر نام ماژول و در همان دایرکتوری قرار داده می‌شود (نمونه: module.pyc). در این شیوه قدیمی علاوه بر  وجود بی‌نظمی در میان فایل‌ها، تمایز بین ترجمه‌ نسخه‌های متفاوت مفسر پایتون نیز ممکن نمی‌باشد.</p>
</div>
<p>کدنویسی در محیط تعاملی را در درس بعدی خواهید آموخت ولی به یاد داشته باشید که مفسر پایتون این محیط را به مانند یک اسکریپت در نظر می‌گیرد.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><a class="reference external" href="http://coderz.ir/python-tutorial-create-project/">لطفا دیدگاه و سوال‌های مرتبط با این درس خود را در کدرز مطرح نمایید.</a></p>
<p><span class="emoji-size">😊</span> امیدوارم مفید بوده باشه</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="l02.html" class="btn btn-neutral" title="درس ۰۲: نصب و راه‌اندازی"><span class="fa fa-arrow-circle-left"></span> قبلی</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" dir="ltr">
    <p>
        &copy; Copyright 2015, Saeid Darvishi.

    <a href="https://twitter.com/saeiddrv" target="_blank">@saeiddrv</a>
    </p>
  </div>

<div dir="ltr">
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</div>
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  
  
  <script type="text/javascript">
      jQuery('.wy-menu.rst-pro').html('');
  </script>

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>