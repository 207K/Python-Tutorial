.. role:: emoji-size

.. meta::
   :description: کتاب آموزش زبان برنامه نویسی پایتون به فارسی، آموزش ماژول re در پایتون، عبارات باقاعده در پایتون، Regular expression در پایتون، regex در پایتون
   :keywords:  آموزش, آموزش پایتون, آموزش برنامه نویسی, پایتون, تابع, کتابخانه, پایتون, re


درس ۱۵: کتابخانه استاندارد پایتون: Regular expression در پایتون - re
============================================================================

**عبارات با قاعده** (**Regular expression**) یا به اختصار **RegEx**، رشته‌ای حاوی کاراکترهایی خاص و با معنی است که در عملیات‌هایی مانند یافتن (find)، جاگذاری (repleace) و اعتبارسنجی (validation) به شدت کاربرد پیدا کرده است. در واقع با استفاده از RegEx می‌توان یک الگو (pattern) برای جستجو در متن یا تطابق آن ایجاد کرد.  [`ویکی‌پدیا <https://en.wikipedia.org/wiki/Regular_expression>`__]

در این درس به شرح قواعد موجود در RegEx و همچنین ماژول ``re`` از کتابخانه استاندارد پایتون خواهیم پرداخت [`اسناد پایتون <https://docs.python.org/3/library/re.html>`__]. ماژول ``re`` یک مجموعه ابزار برای کار با RegEx در پایتون را فراهم آورده است که می‌توان آن را موتور تحلیل RegEx در پایتون دانست.





:emoji-size:`✔` سطح: متوسط

----


.. contents:: سرفصل‌ها
    :depth: 2

----

عبارات باقاعده
-----------------

قواعد «عبارات باقاعده» شامل استفاده و چیدمان تعدادی کاراکتر خاص می‌شود که در مجموع معنی یا الگویی را به وجود می‌آورند!. در ادامه به بررسی این کاراکترها می‌پردازیم.


کاراکترهای تطابق (Matching Characters)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

در عمل تطبیق (Match) با RegEx، اکثر حروف و کاراکتر‌ها معرف خود همان کاراکتر است. برای مثال کاراکتر ``a`` معرف ``a`` است و  کلمه ``test`` نیز با همان کلمه ``test`` تطابق یا همخوانی پیدا می‌کند. 


با این حال برخی از کاراکترها هستند که به جای همخوانی با خود، مفهوم دیگری را می‌رسانند که عبارتند از::

  . ^ $ * + ? [] {} | () \


* Dot ``.``

  به معنی «هر کاراکتری» می‌باشد. یعنی وجود ``.`` در یک الگو (Pattern) باعث انجام عمل تطابق یا همخوانی با هر کاراکتری خواهد شد (به جز کاراکتر newline یا ``n\``).

  .. tip::
      به صورت پیش‌فرض ``.`` در الگوی RegEx کاراکتر newline را شامل نمی‌شود ولی در زبان برنامه‌نویسی پایتون می‌توان با نشانه‌گذاری ``re.DOTALL`` کاری کرد که کاراکتر newline را نیز شامل شود. *نمونه کد مربوط به این بحث در بخش بعدی بررسی خواهد شد.*

  به عنوان نمونه الگوی ``...`` هر سه کاراکتر متوالی را در بر می‌گیرد::

    ...


  ::

    'ab'          => no matche
    'abc1234'     => 2 matches ('abc', '123')
    '01267'       => 1 matche  ('012')
    'python'      => 2 matches ('pyt', 'hon')
    '2 0 85  ad'  => 3 matches ('2 0', ' 85', '  a')

  [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/7>`__]



* Caret ``^``

  در یک کاربرد در سمت چپ یک الگو قرار می‌گیرد و تعین کننده الزام شروع با آن الگو (Pattern) می‌باشد (*کاربرد دیگر آن در ادامه ذکر خواهد شد*).


  ::

    ^a


  ::

    'a'        => 1 matche ('a')
    'abc'      => 1 matche ('a')
    'bac'      => no matche ('a' is not in the start)

  [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/8>`__]


  ::

    ^ab

  ::

    'abc'           => 1 matche ('ab')
    'acb'           => no matche (starts with 'a' but not followed by 'b')
    'ab123 ab456'   => 1 matche ('ab' from ab123)


  [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/10>`__]


* Dollar ``$``

  تعین کننده نقطه پایان تطابق الگو می‌باشد.


  ::

     a$
           a        => Matched
           formula  => Matched
           cab      => NO Matched ('a' is not in the end)


  ::

     ^s...d$
   
  به عنوان مثالی دیگر، الگوی بالا معرف هر کلمه پنج کاراکتری است که با کاراکتر ``s`` شروع و با کاراکتر ``d`` پایان می‌پذیرد.


* Star ``*``

  معرف **هیچ** یا **هر تعداد** تکرار الگوی سمت چپ خود می‌باشد.


  ::

     ma*n
           mn       => Matched
           man      => Matched
           maaan    => Matched
           main     => NO Matched ('a' is not followed by 'n')
           woman    => Matched


* Plus ``+``

  معرف **یک** یا **هر تعداد** تکرار الگوی سمت چپ خود می‌باشد.


  ::

     ma+n
           mn       => NO Matched (no 'a' character)
           man      => Matched
           maaan    => Matched
           main     => NO Matched ('a' is not followed by 'n')
           woman    => Matched



* Question Mark ``?``

  معرف **هیج** یا **یک** تکرار الگوی سمت چپ خود می‌باشد.


  ::

     ma?n
           mn       => Matched
           man      => Matched
           maaan    => NO Matched (more than one 'a' character)
           main     => NO Matched ('a' is not followed by 'n')
           woman    => Matched



* Square brackets ``[ ]``

  از دو کاراکتر ``[`` و  ``]`` برای بیان یک دسته یا بازه از کاراکترها استفاده می‌شود که برای این منظور می‌توان تک تک کاراکترها را به صورت صریح نوشت یا با استفاده از کاراکتر ``-`` به سادگی یک بازه را تعیین نمود.


  ::

     [abc]

  برای نمونه، الگوی بالا با هر رشته‌ای که حاوی کاراکتر‌های   ``b`` ،``a`` یا ``c`` باشد تطابق خواهد داشت [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/2>`__].


  ::

     [abc]
           a          => 1 Matched
           ac         => 2 Matched
           python     => NO Matched
           abc de ca  => 5 Matched


  همانطور که بیان شد، با استفاده از کاراکتر ``-`` هر دو بخش روبرو در نمونه کد پایین با یکدیگر معادل و برابر هستند::

     [0-9]       ==    [0123456789]
     [1-4]       ==    [1234]
     [a-e]       ==    [abcde]
     [1-5a-e]    ==    [12345abcde]
     [0-39]      ==    [01239]
     [a-eA-E]    ==    [abcdeABCDE]


  .. note::
      باید توجه داشت RegEx ذاتا CASE SENSITIVE است و کوچک یا بزرگ بودن حروف انگلیسی در آن تاثیر دارد. با این حال زبان‌های برنامه‌نویسی از جمله پایتون امکاناتی را برای غیرفعال ساختن این وضعیت فراهم می‌آورند که در ادامه بررسی خواهد شد.


  **کاربرد دوم کاراکتر  ^ (Caret)**

  اکنون زمان آن رسیده است تا با کاربرد دوم کاراکتر Caret ``^`` آشنا شویم: با قرار دادن این کاراکتر به عنوان عضو ابتدای یک ``[ ]`` می‌توان عملکرد یا مفهوم آن را برعکس‌ یا در واقع NOT کرد! برای نمونه الگوی ``[abc^]`` به معنی تطابق با هر کاراکتری است به جز ``b`` ،``a`` و ``c``. [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/3>`__]



* Braces ``{ }``

  با ساختاری مشابه ``{n,m}`` به کار می‌رود که در آن ``n`` و ``m`` به ترتیب بیان کننده حداقل و حداکثر تعداد تکرار الگوی سمت چپ خود می‌باشند.


  ::

     a{2,3}
           abc dat      => NO Matched
           abc daat     => 1 Matched (at d'aa't)
           aabc daaat   => 2 Matched (at 'aa'bc and d'aaa't)
           aabc daaaat  => 2 Matched (at 'aa'bc and d'aaa'at)


  [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/4>`__]

  ::

     [0-9]{2,4}
           1          => NO Matched
           ab123cde   => 1 Matched (at ab'123'cde)
           12         => 1 Matched
           123456789  => 2 Matched (at '1234' and '5678')
           1 2 3 4    => NO Matched


  [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/5>`__]



* Alternation ``|``

  این کاراکتر مفهومی معادلی عملگر ``OR`` (یا) دارد که معرف تطابق با الگوی سمت راست **یا** سمت چپ خود می‌باشد.


  ::

     a|b
           cde      => NO Matched
           ade      => 1 Matched (at 'a'de)
           acdbea   => 3 Matched (at 'a'cd'b'e'a')

  [`regex101@ تست آنلاین <https://regex101.com/r/IIc4Fh/6>`__]



* Group ``()``

  این کاراکتر 



|

----

:emoji-size:`😊` امیدوارم مفید بوده باشه

`لطفا دیدگاه و سوال‌های مرتبط با این درس خود را در کدرز مطرح نمایید. <http://www.coderz.ir/python-tutorial-re-regex/>`_



